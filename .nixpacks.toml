# .nixpacks.toml
# 🚀 Nixpacks build config cho EasyPanel / Railway
# Dùng Node 22.12+ để tương thích với Vite 6 và Rolldown

[phases.setup]
nodejs_version = "22.12.0"

[phases.install]
cmds = ["npm install"]

[phases.build]
cmds = [
  # Dọn sạch cache đề phòng Rolldown lỗi
  "rm -rf node_modules package-lock.json && npm cache clean --force && npm install",
  "npm run build"
]

[start]
cmd = "npm run dev"
